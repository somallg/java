# Using Memcached* To improve performance of Java Enterprise applications## Overview of Memcached and Java caching architectures* Java caching frameworks (ie EHCache, OSCache) are HashMap objects* This strategy works for small size of data, but doesn't work on big data (few GB)* Memcached is a distributed architectural => allow system scale* Architecture consists of 2 elements: servers and client* Many servers but each server doesn't know about other* Client know about all the servers## Using a traditional Java cache* Create CacheManager object and getting/setting cache entries on it.* Must use on the same JVM as CacheManager## Using Memcached* Download and install Memcached* Memcached server listen on either TCP or UDP port for caching calls* Download client JAR* MemcachedClient.set() store Java Object to server* MemcachedClient.get() get the value from a server* MemcachedClient.add() add object if and only if it does not already exist* MemcachedClient.replace() replace the object for a given key* MemcachedClient.delete() delete given key from cache## Memcached client logic* Algorithm to choose which server base on hashCode() of the cache key## Using Memcached in an enterprise web applications* Enter Hibernate-Memcached* 2 way to use it :* Create a class that implements org.hibernate.cache.CacheProvider and stores the cache entries in Memcached server* Use hibernate-memcached framework## Config Hibernate-Memcached as a caching framework* Config hibernate.cfg.xml:* cache.provider_class: which class should be used as cache implementation* hibernate.Memcached.server: address of Memcached server* hibernate.Memcached.cacheTimeSeconds: number of seconds an item should be cached* hibernate.Memcached.connectionFactory: use BinaryConnectionFactory## Develop a Caching Strategy* Depend on your data you want to cache## Sequence of events in a client thread* MemcachedClient.get() forward control to asyncGet() => to either AsciiOperationFactory (default) or BinaryOperationFactory, depends on the Memcached protocol your client uses## Sequence of events in daemon threads* MemcachedClient implements the java.lang.Runnable